<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malcolm Ferguson</title>
    <!-- Import General Head Settings-->
    <link rel="icon" type="image/x-icon" href="\Images\MLogo.ico">
    <link rel="stylesheet" href="stylesNavBar.css">
    <link rel="stylesheet" href="stylesIndex.css">
    <link rel="stylesheet" href="stylesFooter.css">
    <link rel="stylesheet" href="styles_index_hero.css">
    <link rel="stylesheet" href="stylesCustomSite.css">

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function isMobile() {
                return /Mobi|Android/i.test(navigator.userAgent) || window.innerWidth <= 1080;
            }

            if (isMobile()) {
                window.location.href = "mobile.html"; 
            }
        });

        // Loading Screen Script
        window.addEventListener('load', function() {
            const loadingScreen = document.getElementById('loading-screen');
            const body = document.body;
            
            // Add a minimum loading time to show the animation
            setTimeout(function() {
                loadingScreen.classList.add('fade-out');
                body.classList.remove('loading');
                
                // Remove the loading screen from DOM after transition
                setTimeout(function() {
                    loadingScreen.style.display = 'none';
                }, 500);
            }, 1000); // Show loader for at least 1 second
        });
    </script>

</head>

<body class="loading">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <!--<div class="loading-subtitle">Malcolm Ferguson</div>-->
        <div class="loader"></div>
        <div class="loading-text">Loading...</div>
    </div>

    <div id="navbar" class="navbar"></div> 
    <script>
        fetch('navbar.html?cache-bust=' + new Date().getTime())
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar').innerHTML = data;
            })
            .catch(error => {
                console.error('There was a problem with the fetch operation:', error);
            });
        
        window.addEventListener('scroll', function () {
            const navbar = document.getElementById('navbar');
            const scrollPosition = window.scrollY;
            const maxScroll = 50; 
            const opacity = Math.min(scrollPosition / maxScroll, 1);
            navbar.style.backgroundColor = `rgba(40, 40, 40, ${opacity})`;
        });
    </script>

    <div id="lightbox" class="lightbox">
        <div class="lightbox-content">
            <span class="close-btn" onclick="closeLightbox()">&times;</span>
            <p>This site is still under development, so some things may not work as you may expect. Regardless, I appreciate you taking the time to check this site out!</p>
            <div class="dismiss-btn-row">
                <button class="dismiss-btn" onclick="closeLightbox()">This is outrageous!</button>
                <button class="dismiss-btn" onclick="closeLightbox()">Okay, good to know!</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('lightbox').style.display = 'block';
    });

    function closeLightbox() {
        document.getElementById('lightbox').style.display = 'none';
    }
    </script>

    <section id="hero">
        <div class="hero-container">
            <div class="hero-image">
                <div class="row">
                    <img src="Images/hero_images/daniel-roe-lpjb_UMOyx8-unsplash.jpg" alt="Image 1" width="200"
                        height="200" class="transform-image-1">
                    <img src="Images/hero_images/patrick-bald-llZIWkNGzS4-unsplash.jpg" alt="Image 2" width="200"
                        height="200" class="transform-image-2">
                </div>
                <div class="row">
                    <img src="Images/hero_images/katie-moum-l0GRQpXwgPk-unsplash.jpg" alt="Image 3" width="200"
                        height="200" class="transform-image-3">
                </div>
                <div class="row">
                    <img src="Images/hero_images/laurel-balyeat-ExarETx4xNA-unsplash.jpg" alt="Image 4" width="200"
                        height="200" class="transform-image-4">
                    <img src="Images/hero_images/nitish-meena-ANo5_iE9dcU-unsplash.jpg" alt="Image 4" width="200"
                        height="200" class="transform-image-5">
                </div>
            </div>
            <div class="hero-text">
                <h2 class="hero-subtitle">Welcome!</h2>
                <h1 class="hero-title">My name is Malcolm Ferguson.</h1>
                <p class="hero-description">Mechanical engineering undergraduate, currently studying and
                    researching experimental robotics. Feel free to look around and see what I'm up to!</p>
            </div>
        </div>

    </section>
    <section id="About">
        <h1>About</h1>
        <p>Education & Timeline</p>
        <div class="timeline-container">
            <div class="timeline-left">
                <div class="timeline">
                    <div class="timeline-item" data-image="daniel-roe-lpjb_UMOyx8-unsplash.jpg">
                        <div class="timeline-content">
                            <h3>August 2022</h3>
                            <p>Started my undergraduate studies at Texas A&M University.</p>
                        </div>
                    </div>
                    <div class="timeline-item" data-image="patrick-bald-llZIWkNGzS4-unsplash.jpg">
                        <div class="timeline-content">
                            <h3>September 2022</h3>
                            <p>Joined TURTLE robotics, with the POBS research team.</p>
                        </div>
                    </div>
                    <div class="timeline-item" data-image="katie-moum-l0GRQpXwgPk-unsplash.jpg">
                        <div class="timeline-content">
                            <h3>May 2023</h3>
                            <p>Became the Public Relations Officer for TURTLE Robotics.</p>
                        </div>
                    </div>
                    <div class="timeline-item" data-image="laurel-balyeat-ExarETx4xNA-unsplash.jpg">
                        <div class="timeline-content">
                            <h3>January 2024</h3>
                            <p>One of the founding members of DRON, TURTLE Robotics</p>
                        </div>
                    </div>
                    <div class="timeline-item" data-image="nitish-meena-ANo5_iE9dcU-unsplash.jpg">
                        <div class="timeline-content">
                            <h3>September 2024</h3>
                            <p>Took over as project lead for POBS</p>
                        </div>
                    </div>
                    <div class="timeline-item" data-image="daniel-roe-lpjb_UMOyx8-unsplash.jpg">
                        <div class="timeline-content">
                            <h3>2024</h3>
                            <p>Joined the robotics research team.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="timeline-right">
                <div class="timeline-image-container">
                    <img id="timeline-active-image" src="Images/hero_images/daniel-roe-lpjb_UMOyx8-unsplash.jpg" alt="Timeline Event" />
                    <div class="image-overlay">
                        <h3 id="timeline-active-title">August 2022</h3>
                        <p id="timeline-active-description">Started my undergraduate studies at Texas A&M University.</p>
                    </div>
                </div>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const timelineItems = document.querySelectorAll('.timeline-item');
                const timeline = document.querySelector('.timeline');
                const activeImage = document.getElementById('timeline-active-image');
                const activeTitle = document.getElementById('timeline-active-title');
                const activeDescription = document.getElementById('timeline-active-description');
        
                const isElementInViewport = (el) => {
                    const rect = el.getBoundingClientRect();
                    const windowHeight = window.innerHeight || document.documentElement.clientHeight;
                    return rect.top <= windowHeight * 0.5 && rect.bottom >= windowHeight * 0.3;
                };

                const updateTimelineProgress = () => {
                    let visibleItems = 0;
                    let lastVisibleItem = null;
                    let activeItem = null;
                    
                    timelineItems.forEach((item, index) => {
                        if (isElementInViewport(item)) {
                            if (!item.classList.contains('visible')) {
                                // Add staggered delay for each item
                                setTimeout(() => {
                                    item.classList.add('visible');
                                }, index * 200);
                            }
                            visibleItems++;
                            lastVisibleItem = item;
                            
                            // Set the first visible item as active
                            if (!activeItem) {
                                activeItem = item;
                            }
                        }
                    });

                    // Update the active image and content
                    if (activeItem) {
                        const imageName = activeItem.getAttribute('data-image');
                        const title = activeItem.querySelector('h3').textContent;
                        const description = activeItem.querySelector('p').textContent;
                        
                        // Update image with fade effect
                        activeImage.style.opacity = '0.7';
                        setTimeout(() => {
                            activeImage.src = `Images/hero_images/${imageName}`;
                            activeTitle.textContent = title;
                            activeDescription.textContent = description;
                            activeImage.style.opacity = '1';
                        }, 300);
                    }

                    // Calculate the height for the connecting line
                    if (lastVisibleItem && timeline) {
                        const timelineRect = timeline.getBoundingClientRect();
                        const lastItemRect = lastVisibleItem.getBoundingClientRect();
                        const relativeTop = lastItemRect.top - timelineRect.top;
                        const progressHeight = Math.max(0, relativeTop + 30); // +30 to reach the dot center
                        
                        timeline.style.setProperty('--progress-height', `${progressHeight}px`);
                    }
                };
        
                window.addEventListener('scroll', updateTimelineProgress);
                updateTimelineProgress(); // Initial check
            });
        </script>
    </section>
    <section id="Projects">
        <h1>Projects</h1>
        <p>Some things I am working on!</p>
        <div class="projects-grid">
            <div class="project-card project-card-1">
                <div class="project-overlay">
                    <h3>Project 1</h3>
                    <p>Description coming soon...</p>
                </div>
            </div>
            <div class="project-card project-card-2">
                <div class="project-overlay">
                    <h3>Project 2</h3>
                    <p>Description coming soon...</p>
                </div>
            </div>
            <div class="project-card project-card-3">
                <div class="project-overlay">
                    <h3>Project 3</h3>
                    <p>Description coming soon...</p>
                </div>
            </div>
            <div class="project-card project-card-4">
                <div class="project-overlay">
                    <h3>Project 4</h3>
                    <p>Description coming soon...</p>
                </div>
            </div>
            <div class="project-card project-card-5">
                <div class="project-overlay">
                    <h3>Project 5</h3>
                    <p>Description coming soon...</p>
                </div>
            </div>
        </div>
    </section>

    <footer id="footerIndex">
        <div id="theFooter"></div>
        <script>
            fetch('footer.html?cache-bust=' + new Date().getTime())
                .then(response => response.text())
                .then(data => {
                    document.getElementById('theFooter').innerHTML = data;
                    document.getElementById('current-year').textContent = new Date().getFullYear();
                })
                .catch(error => {
                    console.error('There was a problem with the fetch operation:', error);
                });
        </script>
    </footer>
    <script src="jsIndex.js"></script>
</body>

</html>